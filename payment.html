<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Payment - A2CareConnect</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://use.typekit.net/yjp3aho.css">
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body { font-family: "sofia-pro", sans-serif; }
    .payment-method-card {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .payment-method-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }
    .payment-method-card.selected {
      border-color: #3B82F6;
      background: linear-gradient(135deg, #EBF4FF 0%, #DBEAFE 100%);
    }
    .step-indicator {
      transition: all 0.3s ease;
    }
    .step-indicator.active {
      background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);
      color: white;
    }
    .step-indicator.completed {
      background: linear-gradient(135deg, #10B981 0%, #059669 100%);
      color: white;
    }
    .card-input {
      transition: all 0.3s ease;
    }
    .card-input:focus {
      border-color: #3B82F6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    .security-badge {
      animation: pulse 2s infinite;
    }
    .loading-spinner {
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    .price-breakdown {
      background: linear-gradient(135deg, #F8FAFC 0%, #E2E8F0 100%);
    }
  </style>
</head>
<body class="bg-gray-50">
  <!-- Navbar Container -->
  <div id="navbar-container" data-source="components/navbar.html"></div>

  <!-- Payment Header -->
  <div class="bg-white shadow-sm border-b" data-id="payment-header">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-4">
          <button onclick="history.back()" class="p-2 hover:bg-gray-100 rounded-full transition-colors" data-id="back-button">
            <i data-lucide="arrow-left" class="h-5 w-5 text-gray-600"></i>
          </button>
          <h1 class="text-2xl font-bold text-gray-900" data-id="payment-title">Secure Payment</h1>
        </div>
        <div class="flex items-center space-x-2 text-sm text-gray-600">
          <i data-lucide="shield-check" class="h-4 w-4 text-green-600"></i>
          <span data-id="security-text">256-bit SSL Encrypted</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Progress Steps -->
  <div class="bg-white border-b" data-id="progress-section">
    <div class="max-w-4xl mx-auto px-4 py-6">
      <div class="flex items-center justify-center space-x-8">
        <div class="flex items-center">
          <div class="step-indicator completed flex items-center justify-center w-8 h-8 rounded-full border-2 border-gray-300 text-sm font-semibold" data-id="step-1">
            <i data-lucide="check" class="h-4 w-4"></i>
          </div>
          <span class="ml-2 text-sm font-medium text-gray-900" data-id="step-1-label">Booking Details</span>
        </div>
        <div class="flex-1 h-px bg-gray-300"></div>
        <div class="flex items-center">
          <div class="step-indicator active flex items-center justify-center w-8 h-8 rounded-full border-2 border-gray-300 text-sm font-semibold" data-id="step-2">2</div>
          <span class="ml-2 text-sm font-medium text-gray-900" data-id="step-2-label">Payment</span>
        </div>
        <div class="flex-1 h-px bg-gray-300"></div>
        <div class="flex items-center">
          <div class="step-indicator flex items-center justify-center w-8 h-8 rounded-full border-2 border-gray-300 text-sm font-semibold" data-id="step-3">3</div>
          <span class="ml-2 text-sm font-medium text-gray-500" data-id="step-3-label">Confirmation</span>
        </div>
      </div>
    </div>
  </div>

  <div class="max-w-6xl mx-auto px-4 py-8">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      
      <!-- Payment Form Section -->
      <div class="lg:col-span-2 space-y-6">
        
        <!-- Appointment Details Card -->
        <div class="bg-white rounded-xl shadow-sm border p-6" data-id="appointment-details">
          <h3 class="text-lg font-semibold text-gray-900 mb-4" data-id="appointment-title">Appointment Details</h3>
          <div class="flex items-start space-x-4">
            <img src="https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=80&h=80&fit=crop&crop=face" alt="Dr. Sarah Johnson" class="w-16 h-16 rounded-full object-cover" data-id="doctor-avatar">
            <div class="flex-1">
              <h4 class="text-xl font-semibold text-gray-900" data-id="doctor-name">Dr. Sarah Johnson</h4>
              <p class="text-gray-600 mb-2" data-id="doctor-specialty">Cardiologist â€¢ 15 years experience</p>
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-600">
                <div class="flex items-center space-x-2">
                  <i data-lucide="calendar" class="h-4 w-4 text-blue-600"></i>
                  <span data-id="appointment-date">Tuesday, December 15, 2024</span>
                </div>
                <div class="flex items-center space-x-2">
                  <i data-lucide="clock" class="h-4 w-4 text-blue-600"></i>
                  <span data-id="appointment-time">2:30 PM - 3:00 PM</span>
                </div>
                <div class="flex items-center space-x-2">
                  <i data-lucide="video" class="h-4 w-4 text-blue-600"></i>
                  <span data-id="consultation-type">Video Consultation</span>
                </div>
                <div class="flex items-center space-x-2">
                  <i data-lucide="user" class="h-4 w-4 text-blue-600"></i>
                  <span data-id="patient-name">John Doe</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Payment Methods -->
        <div class="bg-white rounded-xl shadow-sm border p-6" data-id="payment-methods-section">
          <h3 class="text-lg font-semibold text-gray-900 mb-6" data-id="payment-methods-title">Choose Payment Method</h3>
          
          <div class="space-y-4">
            <!-- Credit/Debit Card -->
            <div class="payment-method-card selected border-2 rounded-lg p-4" data-id="card-payment-method" data-method="card">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <div class="w-12 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded flex items-center justify-center">
                    <i data-lucide="credit-card" class="h-5 w-5 text-white"></i>
                  </div>
                  <div>
                    <h4 class="font-medium text-gray-900" data-id="card-method-title">Credit/Debit Card</h4>
                    <p class="text-sm text-gray-600" data-id="card-method-desc">Visa, Mastercard, American Express</p>
                  </div>
                </div>
                <div class="flex items-center space-x-1">
                  <img src="https://upload.wikimedia.org/wikipedia/commons/4/41/Visa_Logo.png" alt="Visa" class="h-6" data-id="visa-logo">
                  <img src="https://upload.wikimedia.org/wikipedia/commons/b/b7/MasterCard_Logo.svg" alt="Mastercard" class="h-6" data-id="mastercard-logo">
                </div>
              </div>
            </div>

            <!-- UPI Payment -->
            <div class="payment-method-card border-2 rounded-lg p-4" data-id="upi-payment-method" data-method="upi">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <div class="w-12 h-8 bg-gradient-to-r from-orange-500 to-red-500 rounded flex items-center justify-center">
                    <i data-lucide="smartphone" class="h-5 w-5 text-white"></i>
                  </div>
                  <div>
                    <h4 class="font-medium text-gray-900" data-id="upi-method-title">UPI Payment</h4>
                    <p class="text-sm text-gray-600" data-id="upi-method-desc">Pay using Google Pay, PhonePe, Paytm</p>
                  </div>
                </div>
                <span class="text-green-600 text-sm font-medium" data-id="upi-instant-tag">Instant</span>
              </div>
            </div>

            <!-- Net Banking -->
            <div class="payment-method-card border-2 rounded-lg p-4" data-id="netbanking-payment-method" data-method="netbanking">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <div class="w-12 h-8 bg-gradient-to-r from-green-600 to-blue-600 rounded flex items-center justify-center">
                    <i data-lucide="building-2" class="h-5 w-5 text-white"></i>
                  </div>
                  <div>
                    <h4 class="font-medium text-gray-900" data-id="netbanking-method-title">Net Banking</h4>
                    <p class="text-sm text-gray-600" data-id="netbanking-method-desc">All major banks supported</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Digital Wallets -->
            <div class="payment-method-card border-2 rounded-lg p-4" data-id="wallet-payment-method" data-method="wallet">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <div class="w-12 h-8 bg-gradient-to-r from-purple-600 to-pink-600 rounded flex items-center justify-center">
                    <i data-lucide="wallet" class="h-5 w-5 text-white"></i>
                  </div>
                  <div>
                    <h4 class="font-medium text-gray-900" data-id="wallet-method-title">Digital Wallets</h4>
                    <p class="text-sm text-gray-600" data-id="wallet-method-desc">Paytm, Amazon Pay, JioMoney</p>
                  </div>
                </div>
                <span class="text-blue-600 text-sm font-medium" data-id="wallet-cashback-tag">Cashback</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Card Details Form (shown when card method is selected) -->
        <div id="card-details-form" class="bg-white rounded-xl shadow-sm border p-6" data-id="card-details-section">
          <h3 class="text-lg font-semibold text-gray-900 mb-6" data-id="card-details-title">Card Details</h3>
          
          <form class="space-y-6" data-id="payment-form">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2" data-id="card-number-label">Card Number</label>
              <div class="relative">
                <input type="text" class="card-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none" placeholder="1234 5678 9012 3456" maxlength="19" data-id="card-number-input">
                <div class="absolute inset-y-0 right-3 flex items-center">
                  <i data-lucide="credit-card" class="h-5 w-5 text-gray-400"></i>
                </div>
              </div>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2" data-id="expiry-label">Expiry Date</label>
                <input type="text" class="card-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none" placeholder="MM/YY" maxlength="5" data-id="expiry-input">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2" data-id="cvv-label">CVV</label>
                <div class="relative">
                  <input type="password" class="card-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none" placeholder="123" maxlength="4" data-id="cvv-input">
                  <div class="absolute inset-y-0 right-3 flex items-center">
                    <i data-lucide="help-circle" class="h-4 w-4 text-gray-400"></i>
                  </div>
                </div>
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2" data-id="cardholder-label">Cardholder Name</label>
              <input type="text" class="card-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none" placeholder="John Doe" data-id="cardholder-input">
            </div>

            <!-- Save Card Option -->
            <div class="flex items-center">
              <input type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" data-id="save-card-checkbox">
              <label class="ml-2 text-sm text-gray-600" data-id="save-card-label">
                Save this card for future payments
                <span class="text-green-600 font-medium">(Secure & Encrypted)</span>
              </label>
            </div>
          </form>
        </div>

        <!-- UPI Details Form (hidden by default) -->
        <div id="upi-details-form" class="bg-white rounded-xl shadow-sm border p-6 hidden" data-id="upi-details-section">
          <h3 class="text-lg font-semibold text-gray-900 mb-6" data-id="upi-details-title">UPI Payment</h3>
          
          <div class="space-y-6">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2" data-id="upi-id-label">UPI ID</label>
              <input type="text" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="yourname@upi" data-id="upi-id-input">
            </div>

            <div class="text-center py-4">
              <p class="text-gray-600 mb-4" data-id="or-text">OR</p>
              <div class="grid grid-cols-3 gap-4">
                <button class="p-3 border-2 border-gray-200 rounded-lg hover:border-blue-500 transition-colors" data-id="gpay-button">
                  <img src="https://upload.wikimedia.org/wikipedia/commons/c/cb/Google_Pay_%28GPay%29_Logo.svg" alt="Google Pay" class="h-8 mx-auto">
                </button>
                <button class="p-3 border-2 border-gray-200 rounded-lg hover:border-purple-500 transition-colors" data-id="phonepe-button">
                  <img src="https://logos-world.net/wp-content/uploads/2020/11/PhonePe-Logo.png" alt="PhonePe" class="h-8 mx-auto">
                </button>
                <button class="p-3 border-2 border-gray-200 rounded-lg hover:border-blue-600 transition-colors" data-id="paytm-button">
                  <img src="https://logos-world.net/wp-content/uploads/2020/11/Paytm-Logo.png" alt="Paytm" class="h-8 mx-auto">
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Apply Coupon -->
        <div class="bg-white rounded-xl shadow-sm border p-6" data-id="coupon-section">
          <div class="flex items-center justify-between">
            <h3 class="text-lg font-semibold text-gray-900" data-id="coupon-title">Have a coupon code?</h3>
            <button id="toggle-coupon" class="text-blue-600 hover:text-blue-700 font-medium" data-id="toggle-coupon-button">Apply Coupon</button>
          </div>
          
          <div id="coupon-form" class="hidden mt-4 space-y-4">
            <div class="flex space-x-3">
              <input type="text" class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Enter coupon code" data-id="coupon-input">
              <button class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium" data-id="apply-coupon-button">Apply</button>
            </div>
            <div id="coupon-success" class="hidden p-3 bg-green-50 border border-green-200 rounded-lg">
              <div class="flex items-center space-x-2">
                <i data-lucide="check-circle" class="h-5 w-5 text-green-600"></i>
                <span class="text-green-700 font-medium" data-id="coupon-success-text">Coupon applied! You saved â‚¹50</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Payment Summary Sidebar -->
      <div class="lg:col-span-1">
        <div class="sticky top-6 space-y-6">
          
          <!-- Price Breakdown -->
          <div class="bg-white rounded-xl shadow-sm border overflow-hidden" data-id="price-breakdown">
            <div class="price-breakdown p-6">
              <h3 class="text-lg font-semibold text-gray-900 mb-4" data-id="price-breakdown-title">Payment Summary</h3>
              
              <div class="space-y-3">
                <div class="flex justify-between text-gray-600">
                  <span data-id="consultation-fee-label">Consultation Fee</span>
                  <span data-id="consultation-fee-amount">â‚¹800</span>
                </div>
                <div class="flex justify-between text-gray-600">
                  <span data-id="platform-fee-label">Platform Fee</span>
                  <span data-id="platform-fee-amount">â‚¹25</span>
                </div>
                <div class="flex justify-between text-gray-600">
                  <span data-id="gst-label">GST (18%)</span>
                  <span data-id="gst-amount">â‚¹148.50</span>
                </div>
                <div id="discount-row" class="flex justify-between text-green-600 hidden">
                  <span data-id="discount-label">Discount</span>
                  <span data-id="discount-amount">-â‚¹50</span>
                </div>
                <hr class="border-gray-300">
                <div class="flex justify-between text-xl font-bold text-gray-900">
                  <span data-id="total-label">Total Amount</span>
                  <span id="total-amount" data-id="total-amount">â‚¹973.50</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Security Features -->
          <div class="bg-white rounded-xl shadow-sm border p-6" data-id="security-features">
            <h4 class="font-semibold text-gray-900 mb-4" data-id="security-title">Your Payment is Secure</h4>
            <div class="space-y-3">
              <div class="flex items-center space-x-3">
                <div class="security-badge w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                  <i data-lucide="shield-check" class="h-4 w-4 text-green-600"></i>
                </div>
                <span class="text-sm text-gray-700" data-id="ssl-security">256-bit SSL Encryption</span>
              </div>
              <div class="flex items-center space-x-3">
                <div class="security-badge w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                  <i data-lucide="lock" class="h-4 w-4 text-blue-600"></i>
                </div>
                <span class="text-sm text-gray-700" data-id="pci-compliance">PCI DSS Compliant</span>
              </div>
              <div class="flex items-center space-x-3">
                <div class="security-badge w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                  <i data-lucide="eye-off" class="h-4 w-4 text-purple-600"></i>
                </div>
                <span class="text-sm text-gray-700" data-id="privacy-protection">No Data Stored</span>
              </div>
            </div>
          </div>

          <!-- Payment Button -->
          <div class="space-y-4">
            <button id="pay-now-button" class="w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-4 px-6 rounded-xl font-semibold text-lg hover:from-blue-700 hover:to-blue-800 transition-all transform hover:scale-[1.02] focus:outline-none focus:ring-4 focus:ring-blue-200" data-id="pay-now-button">
              <div class="flex items-center justify-center space-x-2">
                <i data-lucide="lock" class="h-5 w-5"></i>
                <span id="pay-button-text">Pay Securely - â‚¹973.50</span>
                <div id="payment-loader" class="loading-spinner hidden">
                  <i data-lucide="loader-2" class="h-5 w-5"></i>
                </div>
              </div>
            </button>
            
            <p class="text-xs text-gray-500 text-center" data-id="payment-terms">
              By proceeding, you agree to our 
              <a href="#" class="text-blue-600 hover:underline">Terms & Conditions</a> and 
              <a href="#" class="text-blue-600 hover:underline">Privacy Policy</a>
            </p>
          </div>

          <!-- Money Back Guarantee -->
          <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-4 border" data-id="guarantee-section">
            <div class="flex items-center space-x-3">
              <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                <i data-lucide="shield-check" class="h-5 w-5 text-green-600"></i>
              </div>
              <div>
                <h4 class="font-semibold text-gray-900" data-id="guarantee-title">100% Money Back Guarantee</h4>
                <p class="text-sm text-gray-600" data-id="guarantee-desc">If you're not satisfied with the consultation</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Payment Success Modal (Hidden by default) -->
  <div id="payment-success-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4" data-id="success-modal">
    <div class="bg-white rounded-2xl max-w-md w-full p-8 text-center">
      <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
        <i data-lucide="check-circle" class="h-8 w-8 text-green-600"></i>
      </div>
      <h3 class="text-2xl font-bold text-gray-900 mb-2" data-id="success-title">Payment Successful!</h3>
      <p class="text-gray-600 mb-6" data-id="success-message">Your appointment has been confirmed. You will receive confirmation details via email and SMS.</p>
      <div class="space-y-3">
        <button class="w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors" onclick="window.location.href='dashboard.html'" data-id="go-to-dashboard">Go to Dashboard</button>
        <button class="w-full text-gray-600 py-2 px-4 rounded-lg hover:bg-gray-100 transition-colors" onclick="closeSuccessModal()" data-id="close-modal">Close</button>
      </div>
    </div>
  </div>

  <!-- Footer Container -->
  <div id="footer-container" data-source="components/footer.html"></div>

  <script type="module">
    import { loadComponent } from './scripts/components/loader.js';
    
    // Load shared components
    loadComponent('#navbar-container');
    loadComponent('#footer-container');
    
    // Initialize icons after components are loaded
    setTimeout(() => {
      lucide.createIcons();
    }, 100);

    // Payment method selection
    document.querySelectorAll('.payment-method-card').forEach(card => {
      card.addEventListener('click', function() {
        // Remove selected class from all cards
        document.querySelectorAll('.payment-method-card').forEach(c => c.classList.remove('selected'));
        // Add selected class to clicked card
        this.classList.add('selected');
        
        const method = this.getAttribute('data-method');
        
        // Hide all forms
        document.getElementById('card-details-form').classList.add('hidden');
        document.getElementById('upi-details-form').classList.add('hidden');
        
        // Show relevant form
        if (method === 'card') {
          document.getElementById('card-details-form').classList.remove('hidden');
        } else if (method === 'upi') {
          document.getElementById('upi-details-form').classList.remove('hidden');
        }
      });
    });

    // Card number formatting
    const cardNumberInput = document.getElementById('card-number-input');
    if (cardNumberInput) {
      cardNumberInput.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
        let formattedInputValue = value.match(/.{1,4}/g)?.join(' ') || '';
        if (formattedInputValue.length <= 19) {
          e.target.value = formattedInputValue;
        }
      });
    }

    // Expiry date formatting
    const expiryInput = document.getElementById('expiry-input');
    if (expiryInput) {
      expiryInput.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        if (value.length >= 2) {
          value = value.substring(0, 2) + '/' + value.substring(2, 4);
        }
        e.target.value = value;
      });
    }

    // Coupon toggle
    document.getElementById('toggle-coupon')?.addEventListener('click', function() {
      const form = document.getElementById('coupon-form');
      if (form.classList.contains('hidden')) {
        form.classList.remove('hidden');
        this.textContent = 'Hide Coupon';
      } else {
        form.classList.add('hidden');
        this.textContent = 'Apply Coupon';
      }
    });

    // Apply coupon
    document.getElementById('apply-coupon-button')?.addEventListener('click', function() {
      const couponInput = document.getElementById('coupon-input');
      const couponCode = couponInput.value.trim().toLowerCase();
      
      if (couponCode === 'save50' || couponCode === 'first50' || couponCode === 'health50') {
        // Show success message
        document.getElementById('coupon-success').classList.remove('hidden');
        document.getElementById('discount-row').classList.remove('hidden');
        
        // Update total amount
        const totalElement = document.getElementById('total-amount');
        const payButton = document.getElementById('pay-button-text');
        const newTotal = 'â‚¹923.50';
        totalElement.textContent = newTotal;
        payButton.textContent = `Pay Securely - ${newTotal}`;
        
        couponInput.disabled = true;
        this.textContent = 'Applied';
        this.disabled = true;
      } else {
        alert('Invalid coupon code. Try: SAVE50, FIRST50, or HEALTH50');
      }
    });

    // Payment processing
    document.getElementById('pay-now-button')?.addEventListener('click', function() {
      const selectedMethod = document.querySelector('.payment-method-card.selected').getAttribute('data-method');
      
      // Show loading state
      const loader = document.getElementById('payment-loader');
      const buttonText = document.getElementById('pay-button-text');
      
      loader.classList.remove('hidden');
      buttonText.textContent = 'Processing...';
      this.disabled = true;
      
      // Simulate payment processing
      setTimeout(() => {
        // Hide loading state
        loader.classList.add('hidden');
        buttonText.textContent = 'Payment Successful!';
        
        // Show success modal after a brief delay
        setTimeout(() => {
          document.getElementById('payment-success-modal').classList.remove('hidden');
          document.getElementById('payment-success-modal').classList.add('flex');
        }, 500);
      }, 3000);
    });

    // Close success modal
    window.closeSuccessModal = function() {
      const modal = document.getElementById('payment-success-modal');
      modal.classList.add('hidden');
      modal.classList.remove('flex');
      
      // Redirect to dashboard after closing
      setTimeout(() => {
        window.location.href = 'dashboard.html';
      }, 500);
    };

    // Form validation
    document.querySelector('[data-id="payment-form"]')?.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const cardNumber = document.getElementById('card-number-input')?.value;
      const expiry = document.getElementById('expiry-input')?.value;
      const cvv = document.getElementById('cvv-input')?.value;
      const cardholderName = document.getElementById('cardholder-input')?.value;
      
      if (!cardNumber || !expiry || !cvv || !cardholderName) {
        alert('Please fill in all card details');
        return;
      }
      
      // Trigger payment processing
      document.getElementById('pay-now-button').click();
    });
  </script>
</body>
</html>